---
interface Props {
  src?: string;
  alt: string;
  caption?: string;
  device?: 'iphone' | 'ipad' | 'mac';
  width?: string;
}

const { src, alt, caption, device = 'iphone', width = 'max-w-sm' } = Astro.props;
const hasImage = !!src;

const deviceLabels: Record<string, string> = {
  iphone: 'iPhone',
  ipad: 'iPad',
  mac: 'Mac',
};
---

<figure class={`my-8 mx-auto ${width}`}>
  {hasImage ? (
    <img
      src={src}
      alt={alt}
      class="rounded-2xl border border-slate-200 dark:border-slate-800 shadow-lg"
      loading="lazy"
    />
  ) : (
    <div class="rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 p-8 text-center">
      <div class="w-12 h-12 rounded-xl bg-slate-200 dark:bg-slate-800 flex items-center justify-center mx-auto mb-3">
        <svg class="w-6 h-6 text-slate-400 dark:text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      </div>
      <p class="text-sm font-medium text-slate-500 dark:text-slate-400 mb-1">
        {deviceLabels[device]} Screenshot
      </p>
      <p class="text-xs text-slate-400 dark:text-slate-500">
        {alt}
      </p>
    </div>
  )}
  {caption && (
    <figcaption class="text-center text-sm text-slate-500 dark:text-slate-400 mt-3">
      {caption}
    </figcaption>
  )}
</figure>
