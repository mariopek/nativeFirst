---
interface Props {
  variant?: 'inline' | 'hero';
  courseSlug?: string;
}

const { variant = 'inline', courseSlug = 'vibe-code-native' } = Astro.props;

const isFreeCourse = courseSlug === 'vibe-code-native';
---

{isFreeCourse ? (
  /* Upsell Ship Native on free course lessons */
  variant === 'inline' ? (
    <div class="my-10 p-6 rounded-2xl border border-amber-200 dark:border-amber-800/50 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30">
      <div class="flex items-start gap-4">
        <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
        </div>
        <div>
          <h4 class="font-display font-semibold text-slate-900 dark:text-white mb-1">
            Ready for the Next Level?
          </h4>
          <p class="text-sm text-slate-600 dark:text-slate-400 mb-3">
            Ship Native teaches you to build a real production iOS app — BetAway, a free gambling recovery tool — from zero to App Store in 24 hours. SwiftData, Charts, WidgetKit, on-device ML, and everything in between.
          </p>
          <a href="/learn/ship-native" class="inline-flex items-center gap-1.5 text-sm font-medium text-amber-600 dark:text-amber-400 hover:gap-2.5 transition-all">
            Explore Ship Native — $79
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  ) : (
    <section class="py-16 sm:py-20">
      <div class="max-w-3xl mx-auto text-center px-4">
        <div class="p-8 sm:p-12 rounded-3xl border border-amber-200 dark:border-amber-800/50 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30">
          <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center mx-auto mb-6">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
          </div>
          <h3 class="font-display font-bold text-2xl sm:text-3xl text-slate-900 dark:text-white mb-4">
            Build a Real App with AI
          </h3>
          <p class="text-slate-600 dark:text-slate-400 mb-6 max-w-lg mx-auto">
            Take your skills to production. Ship Native walks you through building BetAway — a free gambling recovery app with SwiftData, Charts, WidgetKit, and on-device ML. From zero to App Store in 26 lessons.
          </p>
          <a href="/learn/ship-native" class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold hover:opacity-90 transition-opacity">
            Explore Ship Native — $79
          </a>
        </div>
      </div>
    </section>
  )
) : (
  /* Community CTA on premium course lessons */
  variant === 'inline' ? (
    <div class="my-10 p-6 rounded-2xl border border-purple-200 dark:border-purple-800/50 bg-gradient-to-br from-purple-50 to-cyan-50 dark:from-purple-950/30 dark:to-cyan-950/30">
      <div class="flex items-start gap-4">
        <div class="flex-shrink-0 w-10 h-10 rounded-xl gradient-brand flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </div>
        <div>
          <h4 class="font-display font-semibold text-slate-900 dark:text-white mb-1">
            Build Together — Community
          </h4>
          <p class="text-sm text-slate-600 dark:text-slate-400 mb-3">
            Got stuck? Found a better approach? Share your progress and questions in the comments below. The community is here to help.
          </p>
          <a href="#comments" class="inline-flex items-center gap-1.5 text-sm font-medium text-purple-600 dark:text-purple-400 hover:gap-2.5 transition-all">
            Join the discussion
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  ) : (
    <section class="py-16 sm:py-20">
      <div class="max-w-3xl mx-auto text-center px-4">
        <div class="p-8 sm:p-12 rounded-3xl border border-purple-200 dark:border-purple-800/50 bg-gradient-to-br from-purple-50 to-cyan-50 dark:from-purple-950/30 dark:to-cyan-950/30">
          <div class="w-14 h-14 rounded-2xl gradient-brand flex items-center justify-center mx-auto mb-6">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <h3 class="font-display font-bold text-2xl sm:text-3xl text-slate-900 dark:text-white mb-4">
            What Should We Build Next?
          </h3>
          <p class="text-slate-600 dark:text-slate-400 mb-6 max-w-lg mx-auto">
            This course taught you the workflow. Now let us put it to the test. We are going to pick one app idea from the community and build it from scratch, live, using everything we covered — AI prompting, architecture, testing, and shipping. Your idea could be the one we build.
          </p>
          <a href="#comments" class="inline-flex items-center gap-2 px-6 py-3 rounded-full gradient-brand text-white font-semibold hover:opacity-90 transition-opacity">
            Suggest an App Idea
          </a>
        </div>
      </div>
    </section>
  )
)}
