---
export const prerender = true;

import BaseLayout from '../../../layouts/BaseLayout.astro';
import { SITE, APPS } from '../../../lib/constants';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog', ({ data }) => !data.draft);
const latestPosts = posts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<BaseLayout title={`${SITE.name} â€” Josh Comeau Style Experiment`} noindex={true}>
  <style>
    :root {
      --jc-bg-light: #f9f5f0;
      --jc-bg-warm: #fff8f0;
      --jc-surface: #ffffff;
      --jc-text: #1b2d45;
      --jc-text-muted: #617d98;
      --jc-border: #e4ddd4;
      --jc-pink: #ff6b9d;
      --jc-orange: #ff8a5c;
      --jc-yellow: #ffc764;
      --jc-green: #25c685;
      --jc-blue: #4c9aff;
      --jc-purple: #b37aff;
      --jc-indigo: #6c63ff;
      --jc-rainbow: linear-gradient(135deg, #ff6b9d, #ff8a5c, #ffc764, #25c685, #4c9aff, #b37aff);
      --jc-shadow-color: 220deg 30% 50%;
      --jc-radius: 16px;
    }

    .jc-body {
      background: var(--jc-bg-light) !important;
      color: var(--jc-text);
      font-family: 'Inter Variable', -apple-system, sans-serif;
    }

    .jc-rainbow-bar {
      height: 4px;
      background: var(--jc-rainbow);
    }

    .jc-card {
      background: var(--jc-surface);
      border-radius: var(--jc-radius);
      border: 1px solid var(--jc-border);
      box-shadow:
        0 1px 2px hsl(var(--jc-shadow-color) / 0.05),
        0 4px 8px hsl(var(--jc-shadow-color) / 0.04),
        0 12px 24px hsl(var(--jc-shadow-color) / 0.03);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .jc-card:hover {
      transform: translateY(-4px) rotate(-0.5deg);
      box-shadow:
        0 2px 4px hsl(var(--jc-shadow-color) / 0.06),
        0 8px 16px hsl(var(--jc-shadow-color) / 0.06),
        0 24px 48px hsl(var(--jc-shadow-color) / 0.05);
    }

    .jc-gradient-text {
      background: var(--jc-rainbow);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .jc-btn-primary {
      background: var(--jc-indigo);
      color: white;
      font-weight: 700;
      padding: 14px 32px;
      border-radius: 12px;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      font-size: 16px;
      box-shadow:
        0 2px 4px hsl(250deg 50% 40% / 0.2),
        0 4px 12px hsl(250deg 50% 40% / 0.15);
    }

    .jc-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow:
        0 4px 8px hsl(250deg 50% 40% / 0.25),
        0 8px 24px hsl(250deg 50% 40% / 0.2);
    }

    .jc-btn-secondary {
      background: var(--jc-surface);
      color: var(--jc-text);
      font-weight: 600;
      padding: 14px 32px;
      border-radius: 12px;
      border: 2px solid var(--jc-border);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      font-size: 16px;
    }

    .jc-btn-secondary:hover {
      border-color: var(--jc-indigo);
      color: var(--jc-indigo);
      transform: translateY(-2px);
      box-shadow:
        0 2px 8px hsl(var(--jc-shadow-color) / 0.1);
    }

    .jc-tag {
      font-size: 12px;
      font-weight: 700;
      padding: 4px 12px;
      border-radius: 99px;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .jc-tag-pink { background: #fff0f5; color: var(--jc-pink); }
    .jc-tag-blue { background: #eef5ff; color: var(--jc-blue); }
    .jc-tag-green { background: #eafff5; color: var(--jc-green); }
    .jc-tag-orange { background: #fff5ee; color: var(--jc-orange); }
    .jc-tag-purple { background: #f5f0ff; color: var(--jc-purple); }

    .jc-hero-bg {
      background:
        radial-gradient(ellipse 80% 60% at 50% -10%, rgba(108, 99, 255, 0.08), transparent),
        radial-gradient(ellipse 60% 40% at 80% 70%, rgba(255, 107, 157, 0.06), transparent),
        radial-gradient(ellipse 50% 50% at 10% 80%, rgba(255, 199, 100, 0.06), transparent),
        var(--jc-bg-warm);
    }

    .jc-feature-icon {
      width: 56px;
      height: 56px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .jc-wavy-divider {
      height: 60px;
      background: var(--jc-bg-light);
      position: relative;
      overflow: hidden;
    }

    .jc-wavy-divider::before {
      content: '';
      position: absolute;
      top: -30px;
      left: -5%;
      right: -5%;
      height: 60px;
      background: var(--jc-bg-warm);
      border-radius: 0 0 50% 50%;
    }

    @keyframes jc-float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-8px) rotate(1deg); }
      66% { transform: translateY(-4px) rotate(-1deg); }
    }

    .jc-float { animation: jc-float 6s ease-in-out infinite; }
    .jc-float-delay { animation: jc-float 6s ease-in-out infinite; animation-delay: -2s; }
    .jc-float-delay-2 { animation: jc-float 6s ease-in-out infinite; animation-delay: -4s; }

    @keyframes jc-rainbow-shift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .jc-rainbow-animated {
      background: linear-gradient(135deg, #ff6b9d, #ff8a5c, #ffc764, #25c685, #4c9aff, #b37aff, #ff6b9d);
      background-size: 300% 300%;
      animation: jc-rainbow-shift 8s ease infinite;
    }

    .jc-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: white;
      font-size: 18px;
      box-shadow: 0 2px 8px hsl(var(--jc-shadow-color) / 0.15);
    }

    .jc-sparkle {
      position: absolute;
      width: 20px;
      height: 20px;
      pointer-events: none;
    }
  </style>

  <div class="jc-body min-h-screen">
    <!-- Rainbow top bar -->
    <div class="jc-rainbow-bar jc-rainbow-animated"></div>

    <!-- Nav -->
    <nav class="sticky top-0 z-50 border-b border-[#e4ddd4]" style="background: rgba(249, 245, 240, 0.9); backdrop-filter: blur(12px);">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 flex items-center justify-between h-16">
        <a href="/experiment/comeau/" class="flex items-center gap-3 group">
          <div class="w-10 h-10 rounded-2xl jc-rainbow-animated flex items-center justify-center shadow-md group-hover:scale-110 transition-transform duration-300">
            <span class="text-white font-black text-sm">NF</span>
          </div>
          <span class="font-display font-bold text-lg text-[#1b2d45]">
            NativeFirst
          </span>
        </a>
        <div class="hidden md:flex items-center gap-1">
          <a href="/experiment/comeau/" class="px-4 py-2 text-sm font-semibold text-[#1b2d45] rounded-lg hover:bg-white/60 transition-colors">Home</a>
          <a href="#apps" class="px-4 py-2 text-sm font-medium text-[#617d98] rounded-lg hover:bg-white/60 hover:text-[#1b2d45] transition-colors">Apps</a>
          <a href="/experiment/comeau/blog" class="px-4 py-2 text-sm font-medium text-[#617d98] rounded-lg hover:bg-white/60 hover:text-[#1b2d45] transition-colors">Blog</a>
          <a href="/learn" class="px-4 py-2 text-sm font-medium text-[#617d98] rounded-lg hover:bg-white/60 hover:text-[#1b2d45] transition-colors">Learn</a>
          <a href="/contact" class="px-4 py-2 text-sm font-medium text-[#617d98] rounded-lg hover:bg-white/60 hover:text-[#1b2d45] transition-colors">Contact</a>
        </div>
        <a href="/" class="text-xs text-[#a0a0a0] hover:text-[#617d98] transition-colors">back to main</a>
      </div>
    </nav>

    <!-- Hero -->
    <section class="jc-hero-bg relative overflow-hidden">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 py-20 sm:py-28">
        <div class="text-center max-w-2xl mx-auto">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-[#e4ddd4] shadow-sm mb-8">
            <span class="w-2 h-2 rounded-full bg-[#25c685]"></span>
            <span class="text-sm text-[#617d98] font-medium">Crafting native experiences for Apple platforms</span>
          </div>

          <h1 class="font-display font-extrabold text-4xl sm:text-5xl md:text-6xl text-[#1b2d45] mb-6 leading-[1.15]">
            Apps that spark
            <span class="jc-gradient-text"> pure joy</span>
          </h1>

          <p class="text-lg sm:text-xl text-[#617d98] max-w-lg mx-auto mb-10 leading-relaxed">
            We build thoughtful, native apps for iOS and macOS. No compromises, no shortcuts &mdash; just delightful software.
          </p>

          <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
            <a href="#apps" class="jc-btn-primary inline-flex items-center gap-2">
              Explore Our Apps
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
            </a>
            <a href="/experiment/comeau/blog" class="jc-btn-secondary inline-flex items-center gap-2">
              Read the Blog
            </a>
          </div>
        </div>

        <!-- Floating decorative elements -->
        <div class="hidden lg:block absolute top-20 left-10 jc-float">
          <div class="w-16 h-16 rounded-2xl bg-[#fff0f5] border border-[#ffcde0] flex items-center justify-center shadow-lg">
            <span class="text-2xl">&#9758;</span>
          </div>
        </div>
        <div class="hidden lg:block absolute bottom-20 right-16 jc-float-delay">
          <div class="w-14 h-14 rounded-2xl bg-[#eef5ff] border border-[#c8dcff] flex items-center justify-center shadow-lg">
            <span class="text-xl">&#10024;</span>
          </div>
        </div>
        <div class="hidden lg:block absolute top-1/2 right-8 jc-float-delay-2">
          <div class="w-12 h-12 rounded-2xl bg-[#eafff5] border border-[#b5f0d5] flex items-center justify-center shadow-lg">
            <span class="text-lg">&#9889;</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Apps Section -->
    <section id="apps" class="py-20 sm:py-28" style="background: var(--jc-bg-light);">
      <div class="max-w-5xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16">
          <span class="jc-tag jc-tag-blue mb-4 inline-block">Our Apps</span>
          <h2 class="font-display font-extrabold text-3xl sm:text-4xl text-[#1b2d45] mb-4">
            Crafted with <span class="jc-gradient-text">love</span>
          </h2>
          <p class="text-lg text-[#617d98] max-w-md mx-auto">
            Native apps designed with care for every Apple platform.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-6">
          {Object.entries(APPS).map(([key, app], i) => {
            const colors = [
              { bg: '#fff0f5', border: '#ffcde0', accent: 'var(--jc-pink)' },
              { bg: '#eef5ff', border: '#c8dcff', accent: 'var(--jc-blue)' },
              { bg: '#f5f0ff', border: '#ddd0ff', accent: 'var(--jc-purple)' },
            ];
            const color = colors[i % 3];
            return (
              <a href={`/apps/${key}`} class="jc-card p-6 group block">
                <div class="flex items-center gap-4 mb-5">
                  <img src={app.icon} alt={app.name} class="w-14 h-14 rounded-2xl shadow-md group-hover:scale-110 transition-transform duration-300" />
                  <div>
                    <div class="flex items-center gap-2">
                      <h3 class="font-display font-bold text-lg text-[#1b2d45]">{app.name}</h3>
                      <span class:list={[
                        'text-xs font-bold px-2 py-0.5 rounded-full',
                        app.status === 'available'
                          ? 'bg-[#eafff5] text-[#25c685]'
                          : 'bg-[#fff5ee] text-[#ff8a5c]'
                      ]}>
                        {app.status === 'available' ? 'Available' : 'Coming Soon'}
                      </span>
                    </div>
                    <span class="text-xs text-[#a0a0a0] font-medium">{app.platform}</span>
                  </div>
                </div>
                <p class="text-sm text-[#617d98] leading-relaxed mb-4">{app.description}</p>
                <span class="inline-flex items-center gap-1 text-sm font-bold group-hover:gap-2 transition-all" style={`color: ${color.accent};`}>
                  Learn more
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7" /></svg>
                </span>
              </a>
            );
          })}
        </div>
      </div>
    </section>

    <!-- Philosophy Section -->
    <section class="py-20 sm:py-28" style="background: var(--jc-bg-warm);">
      <div class="max-w-5xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-16">
          <span class="jc-tag jc-tag-green mb-4 inline-block">Our Philosophy</span>
          <h2 class="font-display font-extrabold text-3xl sm:text-4xl text-[#1b2d45] mb-4">
            Built with care
          </h2>
          <p class="text-lg text-[#617d98] max-w-lg mx-auto">
            Every app we build is a native Apple citizen. No Electron wrappers, no cross-platform compromises.
          </p>
        </div>

        <div class="grid sm:grid-cols-3 gap-6">
          <div class="jc-card p-8 text-center">
            <div class="jc-feature-icon mx-auto mb-5" style="background: #fff0f5;">
              <svg class="w-6 h-6 text-[#ff6b9d]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <h3 class="font-display font-bold text-lg text-[#1b2d45] mb-2">Silky Smooth</h3>
            <p class="text-sm text-[#617d98] leading-relaxed">Built with Swift & SwiftUI for buttery-smooth animations that feel magical.</p>
          </div>

          <div class="jc-card p-8 text-center">
            <div class="jc-feature-icon mx-auto mb-5" style="background: #eef5ff;">
              <svg class="w-6 h-6 text-[#4c9aff]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
              </svg>
            </div>
            <h3 class="font-display font-bold text-lg text-[#1b2d45] mb-2">Your Privacy Matters</h3>
            <p class="text-sm text-[#617d98] leading-relaxed">Your data stays on your device. No tracking, no cloud required, no surprises.</p>
          </div>

          <div class="jc-card p-8 text-center">
            <div class="jc-feature-icon mx-auto mb-5" style="background: #eafff5;">
              <svg class="w-6 h-6 text-[#25c685]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
              </svg>
            </div>
            <h3 class="font-display font-bold text-lg text-[#1b2d45] mb-2">Designed for Apple</h3>
            <p class="text-sm text-[#617d98] leading-relaxed">Following Apple's Human Interface Guidelines for apps that feel truly at home.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Latest Posts -->
    {latestPosts.length > 0 && (
      <section class="py-20 sm:py-28" style="background: var(--jc-bg-light);">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
          <div class="flex items-end justify-between mb-12">
            <div>
              <span class="jc-tag jc-tag-purple mb-4 inline-block">Latest Posts</span>
              <h2 class="font-display font-extrabold text-3xl sm:text-4xl text-[#1b2d45]">
                Fresh from the blog
              </h2>
            </div>
            <a href="/experiment/comeau/blog" class="hidden sm:inline-flex items-center gap-1 text-sm font-bold text-[#6c63ff] hover:text-[#4c9aff] transition-colors">
              View all posts
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7" /></svg>
            </a>
          </div>

          <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {latestPosts.map((post, i) => {
              const tagColors = ['jc-tag-pink', 'jc-tag-blue', 'jc-tag-green', 'jc-tag-orange', 'jc-tag-purple'];
              return (
                <a href={`/blog/${post.id}`} class="jc-card overflow-hidden group block">
                  <div class="aspect-video relative overflow-hidden" style={`background: ${['#fff0f5', '#eef5ff', '#f5f0ff'][i % 3]};`}>
                    {post.data.coverImage ? (
                      <img src={post.data.coverImage} alt={post.data.coverImageAlt || post.data.title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                    ) : (
                      <div class="absolute inset-0 flex items-center justify-center">
                        <span class="text-4xl opacity-30">&#128221;</span>
                      </div>
                    )}
                  </div>
                  <div class="p-5">
                    <div class="flex items-center gap-2 mb-3">
                      {post.data.tags.slice(0, 2).map((tag, ti) => (
                        <span class:list={['jc-tag', tagColors[(i + ti) % tagColors.length]]}>
                          {tag}
                        </span>
                      ))}
                    </div>
                    <h3 class="font-display font-bold text-base text-[#1b2d45] mb-2 group-hover:text-[#6c63ff] transition-colors line-clamp-2">{post.data.title}</h3>
                    <p class="text-sm text-[#617d98] line-clamp-2 mb-4">{post.data.description}</p>
                    <time class="text-xs text-[#a0a0a0] font-medium">{new Intl.DateTimeFormat('en-US', { year: 'numeric', month: 'long', day: 'numeric' }).format(post.data.pubDate)}</time>
                  </div>
                </a>
              );
            })}
          </div>
        </div>
      </section>
    )}

    <!-- CTA Section -->
    <section class="py-20 sm:py-28 relative overflow-hidden" style="background: var(--jc-bg-warm);">
      <div class="absolute inset-0 opacity-30">
        <div class="absolute top-10 left-10 w-32 h-32 rounded-full" style="background: rgba(255, 107, 157, 0.15); filter: blur(40px);"></div>
        <div class="absolute bottom-10 right-10 w-48 h-48 rounded-full" style="background: rgba(76, 154, 255, 0.15); filter: blur(40px);"></div>
        <div class="absolute top-1/2 left-1/3 w-40 h-40 rounded-full" style="background: rgba(255, 199, 100, 0.12); filter: blur(40px);"></div>
      </div>
      <div class="relative max-w-2xl mx-auto px-4 sm:px-6 text-center">
        <div class="jc-card p-10 sm:p-14">
          <h2 class="font-display font-extrabold text-3xl sm:text-4xl text-[#1b2d45] mb-4">
            Let's build something <span class="jc-gradient-text">wonderful</span>
          </h2>
          <p class="text-lg text-[#617d98] mb-8 max-w-md mx-auto">
            Got questions, feedback, or just want to say hello? We'd love to hear from you!
          </p>
          <a href="/contact" class="jc-btn-primary inline-flex items-center gap-2">
            Get in Touch
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-[#e4ddd4] py-8" style="background: var(--jc-bg-light);">
      <div class="max-w-5xl mx-auto px-4 sm:px-6">
        <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
          <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded-xl jc-rainbow-animated flex items-center justify-center">
              <span class="text-white font-black text-xs">NF</span>
            </div>
            <span class="text-sm text-[#617d98]">&copy; {new Date().getFullYear()} NativeFirst. Made with care.</span>
          </div>
          <div class="flex items-center gap-6">
            <a href="/blog" class="text-xs text-[#a0a0a0] hover:text-[#6c63ff] transition-colors font-medium">Blog</a>
            <a href="/learn" class="text-xs text-[#a0a0a0] hover:text-[#6c63ff] transition-colors font-medium">Learn</a>
            <a href="/privacy" class="text-xs text-[#a0a0a0] hover:text-[#6c63ff] transition-colors font-medium">Privacy</a>
            <a href="/terms" class="text-xs text-[#a0a0a0] hover:text-[#6c63ff] transition-colors font-medium">Terms</a>
          </div>
        </div>
      </div>
      <!-- Rainbow bottom bar -->
      <div class="jc-rainbow-bar jc-rainbow-animated mt-8"></div>
    </footer>
  </div>
</BaseLayout>
