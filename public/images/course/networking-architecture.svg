<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 360" width="900" height="360">
  <defs>
    <linearGradient id="bg5" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f0a1a"/>
      <stop offset="100%" style="stop-color:#1a0e2e"/>
    </linearGradient>
  </defs>

  <rect width="900" height="360" fill="url(#bg5)" rx="16"/>

  <text x="450" y="38" text-anchor="middle" fill="#e2e8f0" font-family="system-ui" font-size="20" font-weight="700">Networking Architecture</text>
  <text x="450" y="58" text-anchor="middle" fill="#64748b" font-family="system-ui" font-size="12">View → ViewModel → Service → URLSession → API → Codable → back</text>

  <!-- Flow boxes -->
  <!-- 1. View -->
  <rect x="30" y="100" width="110" height="70" rx="10" fill="#9333ea" opacity="0.12" stroke="#9333ea" stroke-width="1.5"/>
  <text x="85" y="130" text-anchor="middle" fill="#c084fc" font-family="system-ui" font-size="14" font-weight="700">View</text>
  <text x="85" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">WeatherView</text>

  <line x1="140" y1="135" x2="165" y2="135" stroke="#c084fc" stroke-width="1.5" opacity="0.5"/>
  <polygon points="163,130 173,135 163,140" fill="#c084fc" opacity="0.5"/>

  <!-- 2. ViewModel -->
  <rect x="175" y="100" width="120" height="70" rx="10" fill="#6366f1" opacity="0.12" stroke="#6366f1" stroke-width="1.5"/>
  <text x="235" y="130" text-anchor="middle" fill="#818cf8" font-family="system-ui" font-size="14" font-weight="700">ViewModel</text>
  <text x="235" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">@Observable</text>

  <line x1="295" y1="135" x2="320" y2="135" stroke="#818cf8" stroke-width="1.5" opacity="0.5"/>
  <polygon points="318,130 328,135 318,140" fill="#818cf8" opacity="0.5"/>

  <!-- 3. Service -->
  <rect x="330" y="100" width="120" height="70" rx="10" fill="#06b6d4" opacity="0.12" stroke="#06b6d4" stroke-width="1.5"/>
  <text x="390" y="130" text-anchor="middle" fill="#67e8f9" font-family="system-ui" font-size="14" font-weight="700">Service</text>
  <text x="390" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">NetworkService</text>

  <line x1="450" y1="135" x2="475" y2="135" stroke="#67e8f9" stroke-width="1.5" opacity="0.5"/>
  <polygon points="473,130 483,135 473,140" fill="#67e8f9" opacity="0.5"/>

  <!-- 4. URLSession -->
  <rect x="485" y="100" width="120" height="70" rx="10" fill="#22c55e" opacity="0.12" stroke="#22c55e" stroke-width="1.5"/>
  <text x="545" y="130" text-anchor="middle" fill="#86efac" font-family="system-ui" font-size="14" font-weight="700">URLSession</text>
  <text x="545" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">async/await</text>

  <line x1="605" y1="135" x2="630" y2="135" stroke="#86efac" stroke-width="1.5" opacity="0.5"/>
  <polygon points="628,130 638,135 628,140" fill="#86efac" opacity="0.5"/>

  <!-- 5. API -->
  <rect x="640" y="100" width="110" height="70" rx="10" fill="#f97316" opacity="0.12" stroke="#f97316" stroke-width="1.5"/>
  <text x="695" y="130" text-anchor="middle" fill="#fdba74" font-family="system-ui" font-size="14" font-weight="700">REST API</text>
  <text x="695" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">JSON response</text>

  <line x1="750" y1="135" x2="775" y2="135" stroke="#fdba74" stroke-width="1.5" opacity="0.5"/>
  <polygon points="773,130 783,135 773,140" fill="#fdba74" opacity="0.5"/>

  <!-- 6. Codable -->
  <rect x="785" y="100" width="90" height="70" rx="10" fill="#ef4444" opacity="0.12" stroke="#ef4444" stroke-width="1.5"/>
  <text x="830" y="130" text-anchor="middle" fill="#fca5a5" font-family="system-ui" font-size="14" font-weight="700">Codable</text>
  <text x="830" y="150" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="10">Decode</text>

  <!-- Return flow arrow -->
  <path d="M 830 170 L 830 210 L 85 210 L 85 170" stroke="#64748b" stroke-width="1.5" fill="none" opacity="0.4" stroke-dasharray="6 3"/>
  <polygon points="80,172 85,162 90,172" fill="#64748b" opacity="0.4"/>
  <text x="450" y="228" text-anchor="middle" fill="#64748b" font-family="system-ui" font-size="11">Decoded model flows back through the chain to update the View</text>

  <!-- Error Handling Row -->
  <rect x="60" y="260" width="780" height="70" rx="10" fill="#ef4444" opacity="0.06" stroke="#ef4444" stroke-width="1" stroke-dasharray="6 3"/>
  <text x="450" y="285" text-anchor="middle" fill="#fca5a5" font-family="system-ui" font-size="14" font-weight="700">Error Handling at Every Layer</text>
  <text x="170" y="310" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="11">View: show error UI</text>
  <text x="380" y="310" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="11">ViewModel: LoadingState enum</text>
  <text x="580" y="310" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="11">Service: typed errors</text>
  <text x="760" y="310" text-anchor="middle" fill="#94a3b8" font-family="system-ui" font-size="11">Retry logic</text>
</svg>